SendEmail:
    name: "Sending Email"
    runs-on: ubuntu-latest
                  
    needs: ["job_name"]
    if: |
      always() &&
        (needs.job_name.result == 'success' || needs.job_name.result == 'skipped' || needs.job_name.result == 'failure' )
        
    defaults:
      run:
        shell: bash
                      
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        
      - name: Installing Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
            
      - name: Downloading Python Dependencies
        run: |
                pip install requests
                pip install mailjet-rest
      
      - name: Download artifact
        uses: actions/download-artifact@v2
        with:
          name: Error
          path: ${{ github.workspace }}
        continue-on-error: true
      
      - name: Sending Email
        run: |
          if [ "${{ needs.job_name.result}}" == 'success' ]; then
            text=" Success Message "
            subject="Successful"
      
          elif [ "${{ needs.job_name.result}}" == 'failure' ]; then
            text="Error Message: '$(cat ${{ github.workspace }}/Error.txt)'."
            subject="Failed"          
                
          else
            echo "Unexpected job result."
            exit 1
          fi
          echo "$text"
          python ./Scripts/sendmail.py "$text" "$subject"
